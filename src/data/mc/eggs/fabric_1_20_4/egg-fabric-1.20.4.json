{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2023-12-10T12:00:00+00:00",
    "name": "Fabric 1.20.4",
    "author": "support@pterodactyl.io",
    "description": "轻量级模组加载器，启动快速，资源占用低，适合安装各种模组。",
    "features": [
        "eula",
        "java_version",
        "pid_limit"
    ],
    "docker_images": {
        "Java 17": "ghcr.io\/pterodactyl\/yolks:java_17",
        "Java 18": "ghcr.io\/pterodactyl\/yolks:java_18",
        "Java 19": "ghcr.io\/pterodactyl\/yolks:java_19",
        "Java 20": "ghcr.io\/pterodactyl\/yolks:java_20",
        "Java 21": "ghcr.io\/pterodactyl\/yolks:java_21"
    },
    "file_denylist": [],
    "startup": "java -Xms128M -XX:MaxRAMPercentage=95.0 -jar {{SERVER_JARFILE}}",
    "config": {
        "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-ip\": \"0.0.0.0\",\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"query.port\": \"{{server.build.default.port}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \")! For help, type \"\r\n}",
        "logs": "{}",
        "stop": "stop"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n# Fabric Installation Script\r\n#\r\n# Server Files: \/mnt\/server\r\napt update\r\napt install -y curl jq wget\r\n\r\ncd \/mnt\/server\r\n\r\n# Check if MC_VERSION is provided and not empty\r\nif [ -z \"${MC_VERSION}\" ] || [ \"${MC_VERSION}\" == \"latest\" ]; then\r\n    MC_VERSION=$(curl -sSL https:\/\/meta.fabricmc.net\/v2\/versions\/game | jq -r '.[0].version')\r\n    echo \"Using latest Minecraft version: ${MC_VERSION}\"\r\nfi\r\n\r\n# Check if FABRIC_VERSION is provided and not empty\r\nif [ -z \"${FABRIC_VERSION}\" ] || [ \"${FABRIC_VERSION}\" == \"latest\" ]; then\r\n    FABRIC_VERSION=$(curl -sSL https:\/\/meta.fabricmc.net\/v2\/versions\/installer | jq -r '.[0].version')\r\n    echo \"Using latest Fabric installer version: ${FABRIC_VERSION}\"\r\nfi\r\n\r\n# Check if LOADER_VERSION is provided and not empty\r\nif [ -z \"${LOADER_VERSION}\" ] || [ \"${LOADER_VERSION}\" == \"latest\" ]; then\r\n    LOADER_VERSION=$(curl -sSL https:\/\/meta.fabricmc.net\/v2\/versions\/loader | jq -r '.[0].version')\r\n    echo \"Using latest Fabric loader version: ${LOADER_VERSION}\"\r\nfi\r\n\r\n# Download Fabric installer\r\necho \"Downloading Fabric installer ${FABRIC_VERSION}\"\r\nwget -O fabric-installer.jar https:\/\/maven.fabricmc.net\/net\/fabricmc\/fabric-installer\/${FABRIC_VERSION}\/fabric-installer-${FABRIC_VERSION}.jar\r\n\r\n# Run Fabric installer to generate server files\r\necho \"Installing Fabric server for Minecraft ${MC_VERSION} with loader ${LOADER_VERSION}\"\r\njava -jar fabric-installer.jar server -mcversion ${MC_VERSION} -loader ${LOADER_VERSION} -downloadMinecraft\r\n\r\n# Rename the server jar to server.jar if it's not already named that\r\nif [ -f \"fabric-server-launch.jar\" ]; then\r\n    if [ \"${SERVER_JARFILE}\" != \"fabric-server-launch.jar\" ]; then\r\n        mv fabric-server-launch.jar ${SERVER_JARFILE}\r\n    fi\r\nfi\r\n\r\n# Create server.properties if it doesn't exist\r\nif [ ! -f server.properties ]; then\r\n    echo \"Creating default server.properties\"\r\n    cat > server.properties << 'EOL'\r\n#Minecraft server properties\r\n#Generated by Pterodactyl Fabric egg\r\nspawn-protection=16\r\nmax-tick-time=60000\r\nquery.port=25565\r\ngenerator-settings=\r\nforce-gamemode=false\r\nallow-nether=true\r\nenforce-whitelist=false\r\ngamemode=survival\r\nbroadcast-console-to-ops=true\r\nenable-query=false\r\nplayer-idle-timeout=0\r\ndifficulty=easy\r\nspawn-monsters=true\r\nbroadcast-rcon-to-ops=true\r\nop-permission-level=4\r\npvp=true\r\nentity-broadcast-range-percentage=100\r\nsnooper-enabled=true\r\nlevel-type=default\r\nhardcore=false\r\nenable-status=true\r\nenable-command-block=false\r\nmax-players=20\r\nnetwork-compression-threshold=256\r\nresource-pack-sha1=\r\nmax-world-size=29999984\r\nfunction-permission-level=2\r\nrcon.port=25575\r\nserver-port=25565\r\nserver-ip=0.0.0.0\r\nspawn-npcs=true\r\nallow-flight=false\r\nlevel-name=world\r\nview-distance=10\r\nresource-pack=\r\nspawn-animals=true\r\nwhite-list=false\r\nrcon.password=\r\ngenerate-structures=true\r\nmax-build-height=256\r\nonline-mode=true\r\nlevel-seed=\r\nuse-native-transport=true\r\nprevent-proxy-connections=false\r\nenable-rcon=false\r\nmotd=A Minecraft Server powered by Fabric\r\nEOL\r\nfi\r\n\r\n# Create eula.txt if it doesn't exist\r\nif [ ! -f eula.txt ]; then\r\n    echo \"Creating eula.txt\"\r\n    echo \"eula=true\" > eula.txt\r\nfi\r\n\r\n# Create mods directory if it doesn't exist\r\nif [ ! -d mods ]; then\r\n    mkdir mods\r\nfi\r\n\r\necho \"Fabric server installation completed!\"",
            "container": "ghcr.io\/pterodactyl\/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Minecraft Version",
            "description": "The version of Minecraft to use. Leave at latest to use the latest version.",
            "env_variable": "MC_VERSION",
            "default_value": "1.20.4",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "Fabric Installer Version",
            "description": "The version of the Fabric installer to use. Leave at latest to use the latest version.",
            "env_variable": "FABRIC_VERSION",
            "default_value": "latest",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "Fabric Loader Version",
            "description": "The version of the Fabric loader to use. Leave at latest to use the latest version.",
            "env_variable": "LOADER_VERSION",
            "default_value": "latest",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:20"
        },
        {
            "name": "Server Jar File",
            "description": "The name of the server jarfile to run the server with.",
            "env_variable": "SERVER_JARFILE",
            "default_value": "fabric-server-launch.jar",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|regex:\/^([\\w\\d._-]+)(\\.jar)$\/"
        }
    ]
} 