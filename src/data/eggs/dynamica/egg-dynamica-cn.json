{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PANEL",
    "meta": {
        "update_url": null,
        "version": "PTDL_v2"
    },
    "exported_at": "2024-06-01T19:44:12+00:00",
    "name": "Dynamica",
    "author": "sebastian.pietschner@gmail.com",
    "description": "一个易于使用的动态语音频道机器人。",
    "features": null,
    "docker_images": {
        "Nodejs 18": "ghcr.io/ptero-eggs/yolks:nodejs_18"
    },
    "file_denylist": [],
    "startup": "npx prisma migrate deploy && yarn start",
    "config": {
        "files": "{}",
        "logs": "{}",
        "startup": "{\r\n    \"done\": \"Bot logged in as \"\r\n}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "container": "node:18-bookworm-slim",
            "entrypoint": "bash",
            "script": "#!/bin/bash\r\n\r\napt update\r\napt -y install tar curl jq git\r\n\r\nmkdir -p /mnt/server\r\ncd /mnt/server\r\n\r\nGITHUB_PACKAGE=\"DynamicaBot/Dynamica-V2\"\r\n\r\n# Find GitHub download URL for Muse for specified version\r\nLATEST_JSON=$(curl --silent \"https://api.github.com/repos/${GITHUB_PACKAGE}/releases/latest\")\r\nRELEASES=$(curl --silent \"https://api.github.com/repos/${GITHUB_PACKAGE}/releases\")\r\n\r\nif [ -z \"${VERSION}\" ] || [ \"${VERSION}\" == \"latest\" ]; then\r\n    DOWNLOAD_URL=$(echo ${LATEST_JSON} | jq -r '.tarball_url')\r\nelse\r\n    VERSION_CHECK=$(echo ${RELEASES} | jq -r --arg VERSION \"${VERSION}\" '.[] | select(.tag_name==$VERSION) | .tag_name')\r\n    if [ \"${VERSION}\" == \"${VERSION_CHECK}\" ]; then\r\n        DOWNLOAD_URL=$(echo ${RELEASES} | jq -r --arg VERSION \"${VERSION}\" '.[] | select(.tag_name==$VERSION) | .tarball_url')\r\n    else\r\n        echo -e \"Could not find version \\\"${VERSION}\\\" of Muse. Defaulting to latest release...\"\r\n        DOWNLOAD_URL=$(echo ${LATEST_JSON} | jq -r '.tarball_url')\r\n    fi\r\nfi\r\n\r\ncurl -sSL -o dynamica.tar.gz ${DOWNLOAD_URL}\r\ntar xvf dynamica.tar.gz --strip-components=1\r\nrm dynamica.tar.gz\r\n\r\n#curl -sSL -o tsconfig.json https://pteropaste.com/xqhjja443pbm\r\n\r\nyarn add tsup --dev\r\nyarn install  --frozen-lockfile\r\n\r\nyarn generate\r\nyarn build\r\n\r\nrm -rf .github/ .vscode/ Dockerfile partial.Dockerfile entrypoint.sh dynamica-egg.json\r\n\r\n\r\n## install end\r\necho \"-----------------------------------------\"\r\necho \"Installation completed...\"\r\necho \"-----------------------------------------\""
        }
    },
    "variables": [
        {
            "name": "数据库路径",
            "description": "创建sqlite数据库的路径。",
            "env_variable": "DATABASE_URL",
            "default_value": "file:/home/container/dynamica/db.sqlite",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "机器人令牌",
            "description": "Discord机器人的令牌。",
            "env_variable": "TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "服务器ID",
            "description": "仅在单个服务器中使用机器人时添加。",
            "env_variable": "GUILD_ID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable",
            "field_type": "text"
        },
        {
            "name": "Sentry DSN",
            "description": "Sentry的DSN。",
            "env_variable": "SENTRY_DSN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable",
            "field_type": "text"
        },
        {
            "name": "MQTT URL",
            "description": "MQTT代理的URL。",
            "env_variable": "MQTT_URL",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable",
            "field_type": "text"
        },
        {
            "name": "MQTT用户名",
            "description": "MQTT代理的用户名。",
            "env_variable": "MQTT_USER",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable",
            "field_type": "text"
        },
        {
            "name": "MQTT密码",
            "description": "MQTT代理的密码。",
            "env_variable": "MQTT_PASS",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable",
            "field_type": "text"
        }
    ]
} 