{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PANEL",
    "meta": {
        "update_url": null,
        "version": "PTDL_v2"
    },
    "exported_at": "2024-06-01T19:44:09+00:00",
    "name": "Bastion",
    "author": "parker@parkervcp.com",
    "description": "Bastion是一个多功能Discord机器人，可以帮助您自动化服务器中的大多数任务，从管理和审核到通过各种激励措施、游戏和其他有趣活动保持成员活跃度",
    "features": null,
    "docker_images": {
        "Bastion": "ghcr.io/ptero-eggs/yolks:bot_bastion"
    },
    "file_denylist": [],
    "startup": "{{STARTUP_CMD}}",
    "config": {
        "files": "{}",
        "logs": "{}",
        "startup": "{\r\n    \"done\": \"Ready\"\r\n}",
        "stop": "^^C"
    },
    "scripts": {
        "installation": {
            "container": "node:20-bookworm",
            "entrypoint": "bash",
            "script": "#!/bin/bash\r\n# Bastion Bot Installation Script\r\n#\r\n# Server Files: /mnt/server\r\n## Move to install folder\r\napt update\r\napt install -y build-essential libtool python3 git tar\r\n\r\n\r\nmkdir -p /mnt/server/\r\ncd /mnt/server/\r\n\r\nif [ -d \"/mnt/server/mongodb\" ]\r\nthen\r\n    cd /mnt/server/\r\n    echo \"backing up mongodb\"\r\n    REINSTALL=true\r\n    tar -czf mongodb_backup.tar.gz mongodb/\r\n    mv mongodb_backup.tar.gz /tmp\r\nfi\r\n\r\ncd /mnt/server\r\nrm -rf * .git/ .github/ .env.example .eslintrc.yml .gitattributes .gitignore .npm/\r\n\r\n\r\n## Clone repo\r\necho \"cloning Bastion bot\"\r\ngit clone -q --depth 1 https://github.com/TheBastionBot/Bastion.git ./\r\n\r\necho \"updating npm\"\r\nnpm install -g npm@latest\r\necho \"npm install --no-package-lock\"\r\nnpm install --no-package-lock\r\necho \"npm run build\"\r\nnpm run build\r\n\r\n## Move config files.\r\nmv settings.example.yaml settings.yaml\r\nrm -rf bastion.cmd .env.example bastion.sh scrips/\r\n\r\n\r\nmkdir -p mongodb/\r\nif [ \"$REINSTALL\" == \"true\" ]\r\nthen\r\n    cd /mnt/server\r\n    echo \"reinstall\"\r\n    mv /tmp/mongodb_backup.tar.gz /mnt/server\r\n    tar xf mongodb_backup.tar.gz\r\n    rm mongodb_backup.tar.gz\r\nelse\r\n    echo \"fresh install\"\r\nfi\r\n\r\necho \"-----------------------------------------\"\r\necho \"Installation completed...\"\r\necho \"-----------------------------------------\""
        }
    },
    "variables": [
        {
            "name": "机器人令牌",
            "description": "从https://discordapp.com/developers/applications/获取的机器人令牌",
            "env_variable": "BOT_TOKEN",
            "default_value": "GETABOTTOKEN",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:80",
            "field_type": "text"
        },
        {
            "name": "机器人客户端ID",
            "description": "从https://discordapp.com/developers/applications/获取的机器人ID",
            "env_variable": "BOT_ID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:32",
            "field_type": "text"
        },
        {
            "name": "MongoDB URL",
            "description": "使用`mongodb://127.0.0.1:27017/bastion`来使用内置的MongoDB服务器",
            "env_variable": "MONGO_URI",
            "default_value": "mongodb://127.0.0.1:27017/bastion",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:128",
            "field_type": "text"
        },
        {
            "name": "音乐活动",
            "description": "启用后，Bastion会将活动状态更新为当前播放的曲目",
            "env_variable": "BASTION_MUSIC_ACTIVITY",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "转发私信",
            "description": "启用后，Bastion会将收到的任何私信转发给机器人应用程序/团队的所有者",
            "env_variable": "BASTION_RELAY_DMS",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "安全模式",
            "description": "启用后，这将禁用不安全命令的使用，如`exec`和`eval`",
            "env_variable": "UNSAFE_MODE",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "Bastion API端口",
            "description": "Bastion API服务器使用的端口",
            "env_variable": "BASTION_API_PORT",
            "default_value": "8377",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:10",
            "field_type": "text"
        },
        {
            "name": "Bastion API认证",
            "description": "访问Bastion API服务器的认证信息",
            "env_variable": "BASTION_API_AUTH",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:128",
            "field_type": "text"
        },
        {
            "name": "启动命令",
            "description": "设置为`npm start`如果您只想启动机器人。\r\n设置为`npm run commands`以激活斜杠命令",
            "env_variable": "STARTUP_CMD",
            "default_value": "npm start",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:npm start,npm run commands",
            "field_type": "text"
        }
    ]
} 